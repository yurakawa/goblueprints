# twittervotesには以下のような機能が追加されます。

- mgoを使ってMongoDBデータベースからすべての投票結果を読み込み、それぞれのドキュメントに含まれる配列optionsからすべての選択肢を取り出します。
- TwitterのストリーミングAPIを使い、接続の開始や管理を行うとともに各選択肢に言及したツイートを検索します。
- 検索にマッチしたツイートについて、選択肢の文字列をNSQに送信します。
- Twitterへの接続が閉じられる（これは長時間の接続ではよくあることで、TwitterのストリーミングAPIの仕様でも実際にそう定義されています）ことがあります。この場合には、すぐに再接続のリクエストを行ってサーバーの負荷を上げるようなことはせず、少しの間隔を空けてから再接続を行って処理を継続します。
- 定期的にMongoDBから最新の調査項目を取得するとともに、Twitterへの接続もリフレッ シュします。こうすることで、常にデータが更新されるようにします。
- ユーザーがCtrl＋Cを押した際に、穏やかにプログラムを終了させます。
